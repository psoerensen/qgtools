% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/data_constructor.R
\name{makeDataSource}
\alias{makeDataSource}
\title{Create a data source specification object}
\usage{
makeDataSource(
  source,
  format = c("DATAFRAME", "CSV", "DMU", "PLINK", "PARQUET"),
  encoding = c("ASCII", "BINARY"),
  id = NULL,
  roles = NULL,
  missing = NULL,
  header = NULL,
  colnames = NULL,
  ...
)
}
\arguments{
\item{source}{Data source. Either a data frame (for \code{format = "DATAFRAME"}),
a file path, or a named list of file paths depending on the chosen format.}

\item{format}{Character. Data format. One of \code{"DATAFRAME"},
\code{"CSV"}, \code{"DMU"}, \code{"PLINK"}, or \code{"PARQUET"}.}

\item{encoding}{Character. One of \code{"ASCII"} or \code{"BINARY"}.
Only meaningful for \code{format = "DMU"}; ignored for other formats.}

\item{id}{Optional character. Name of the individual identifier variable.}

\item{roles}{Optional named list specifying variable roles (e.g. traits,
covariates, weights). If not supplied, roles may be inferred from model
formulas.}

\item{missing}{Optional missing-value specification. The interpretation
depends on the data format.}

\item{header}{Logical. Whether the data source contains column headers.
Defaults depend on the selected format.}

\item{colnames}{Optional character vector or named list of column names.
Required when \code{header = FALSE}.}

\item{...}{Additional format-specific options, stored but not interpreted
at construction time.}
}
\value{
An object of class \code{"DataSource"}.
}
\description{
Create a \code{DataSource} object describing how phenotype and covariate data
are provided to a model. The data may be supplied as an in-memory data frame
or as disk-backed files in a variety of common formats.
}
\details{
The DataSource object is a declarative specification only and does not
load or materialize data into memory.

qgtools requires that all data variables have explicit names. Column names may
be obtained either from headers in the data source or supplied directly by the
user.

For formats that do not include headers (e.g. DMU-style input), column names
must be provided explicitly using the \code{colnames} argument. When headers
are present, they are used by default unless overridden.

Internally, all variables are accessed by name rather than by position. This
ensures robust model specification, avoids ambiguity, and allows the same
model to be applied consistently across different data formats.

Variable roles (e.g. traits, covariates, identifiers) may be specified
explicitly using the \code{roles} argument or inferred later from model
formulas. Model formulas are authoritative in case of conflict.

For DMU-style input, data may be provided in either ASCII (text) or binary
format. ASCII input is expected to conform to INTEGER\emph{4 and REAL}4 ranges,
while binary input must follow the conventions of unformatted Fortran files
on the target system. Binary input places responsibility for value ranges and
portability on the user.
}
\examples{
## In-memory data frame
data_df <- makeDataSource(
  source = mouse,
  format = "DATAFRAME"
)

## CSV file with header
data_csv <- makeDataSource(
  source = "mouse.csv",
  format = "CSV",
  id     = "id"
)

## CSV file without header
data_csv_noheader <- makeDataSource(
  source   = "data.txt",
  format   = "CSV",
  header   = FALSE,
  colnames = c("id", "sex", "reps", "BW")
)

## DMU-style input with separate integer and real files
data_dmu <- makeDataSource(
  source = list(
    integer = "data_int.txt",
    real    = "data_real.txt"
  ),
  format   = "DMU",
  encoding = "ASCII",
  colnames = list(
    integer = c("id", "dam", "sex"),
    real    = c("BW")
  ),
  missing = list(
    integer = 0,
    real    = -999
  )
)

}
